<!-- 
Este script permite generar cajas dinámicamente sobre una imagen con un mapa de imagen.
Las cajas se generan automáticamente a partir de las áreas del mapa de imagen generado con la web https://www.image-map.net/. 
En la seccion de <style> se puede modificar el estilo de las cajas. Esto nos permite poner un background: none; para hacerlas invisibles en la web o un     background: rgba(245, 2, 2, 0.5);  para que se vean mientras hacemos pruebas.
Instrucciones:
1. Subir la imagen a Wordpress y obtener la URL de la imagen.
2. Crear un mapa de imagen en https://www.image-map.net/ seleccionando la opción de cargar una imagen de la web y pegando la URL de la imagen.
3. Crear las áreas del mapa de imagen y asignarles un enlace. Para esto se puede utilizar la herramienta de dibujo de la web. Se pueden crear sin enlace simplemente indicando
el número del stand y luego se puede modificar el enlace en el código.
4. Copiar el código HTML ** SOLAMENTE DEL MAPA** (la parte que va desde <map hasta </map>) generado por la web y pegarlo a continuación, substituyendo el código HTML del mapa actual. 
5. En la parte de este código posterior al mapa substiuir la URL de la imagen del año anterior por la URL de la imagen usada para crear el mapa, en la sección de src="URL_IMAGEN">.
6. Ajustar las variables origWidth y origHeight con las dimensiones originales de la imagen.
7. Substituir los enlaces de las áreas del mapa por los enlaces correctos.
8. Copiar este código en un bloque de código HTML personalizado en la página de Wordpress donde se quiera mostrar el mapa.
-->

<map name="image-map">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/dinak.png" title="24" href="24" coords="1229,900,1340,1031" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/goc-s.a.png" title="25" href="25" coords="1444,1090,1573,1212" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/applus-servicios-tecnologicos.png" title="26" href="26" coords="1322,1124,1444,1257" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/grupo-servicio-movil.png" title="27" href="27" coords="1202,1167,1331,1284" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/coren.png" title="28" href="28" coords="1089,1198,1220,1323" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/management-solutions.png" title="29" href="29" coords="971,1234,1087,1352" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/icoiig.png" title="30" href="30" coords="847,1271,980,1372" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/borgwarner.png" title="31" href="31" coords="1105,787,1218,1022" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/norvento-enerxia.png" title="32" href="32" coords="766,956,931,1203" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/zf-lifetec.png" title="33" href="33" coords="901,910,781,638" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/ineco-1.png" title="19" href="19" coords="865,479,1001,613" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/marine-instruments-s.a.u.png" title="20" href="20" coords="1008,530,1121,646" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/serveo.png" title="21" href="21" coords="1127,547,1245,671" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/indra-1.png" title="22" href="22" coords="1254,579,1363,708" shape="rect">
    <area target="" alt="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/asm-soft-s.l.png" title="23" href="23" coords="1222,789,1335,907" shape="rect">
</map>

<div style="position: relative; width: 100%;">
    <img id="responsive-image" src="https://www.forotecnoloxico.net/wp-content/uploads/2025/02/Hall-de-industriales-con-fondo-scaled.jpg" usemap="#image-map" style="width: 100%; height: auto; display: block;">
    
    <!-- Contenedor donde se generarán las cajas dinámicamente -->
    <div id="clickable-container"></div>
    
    <!-- Tooltip mejorado -->
    <div id="tooltip" style="display: none;">
        <span id="close-tooltip">&times;</span>
        <img id="tooltip-image" src="" alt="">
        <p id="tooltip-text"></p>
    </div>
</div>

<style>
    .clickable-box {
        position: absolute;
        background: none; 
        text-decoration: none;
        display: block;
    }

    #tooltip {
        position: fixed;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        display: flex;
        flex-direction: column;
        align-items: center;
        max-width: 300px;
        text-align: center;
        z-index: 1000;
        cursor: pointer;
    }

    #tooltip img {
        width: 100px;
        height: auto;
        border-radius: 5px;
    }

    #tooltip p {
        font-family: 'Roboto', sans-serif;
        margin: 10px 0 0;
        font-size: 16px;
    }

    #close-tooltip {
        position: absolute;
        top: 5px;
        right: 10px;
        cursor: pointer;
        font-size: 20px;
        font-weight: bold;
    }
</style>

<script>
    var origWidth = 2560;
    var origHeight = 1820;

    function getAreasData() {
        var areas = document.querySelectorAll("map[name='image-map'] area");
        var areasData = [];

        areas.forEach(area => {
            var coords = area.coords.split(',').map(Number);
            var xCoords = [coords[0], coords[2]].sort((a, b) => a - b);
            var yCoords = [coords[1], coords[3]].sort((a, b) => a - b);
            coords = [xCoords[0], yCoords[0], xCoords[1], yCoords[1]];

            areasData.push({
                href: area.href,
                coords: coords,
                title: area.title,
                imgSrc: area.alt
            });
        });
        return areasData;
    }

    function createBoxes() {
        var container = document.getElementById("clickable-container");
        container.innerHTML = "";
        var areasData = getAreasData();

        areasData.forEach((area, index) => {
            var box = document.createElement("a");
            box.href = area.href;
            box.className = "clickable-box";
            box.id = "box" + index;
            box.dataset.title = area.title;
            box.dataset.imgSrc = area.imgSrc;
            box.dataset.href = area.href;
            container.appendChild(box);

            box.addEventListener("click", function(event) {
                event.preventDefault();
                var tooltip = document.getElementById("tooltip");
                document.getElementById("tooltip-image").src = this.dataset.imgSrc;
                document.getElementById("tooltip-text").innerText = this.dataset.title;
                tooltip.style.display = "block";
                tooltip.style.left = event.clientX + "px";
                tooltip.style.top = event.clientY + "px";
                tooltip.dataset.href = this.dataset.href;
            });
        });
    }

    function resizeElements() {
        var img = document.getElementById("responsive-image");
        var scaleX = img.clientWidth / origWidth;
        var scaleY = (img.clientWidth * (origHeight / origWidth)) / origHeight;

        var areasData = getAreasData();

        areasData.forEach((area, index) => {
            var box = document.getElementById("box" + index);
            var x1 = area.coords[0] * scaleX;
            var y1 = area.coords[1] * scaleY;
            var x2 = area.coords[2] * scaleX;
            var y2 = area.coords[3] * scaleY;

            box.style.left = x1 + "px";
            box.style.top = y1 + "px";
            box.style.width = (x2 - x1) + "px";
            box.style.height = (y2 - y1) + "px";
        });
    }

    document.addEventListener("DOMContentLoaded", function() {
        createBoxes();
        resizeElements();
        window.addEventListener("resize", resizeElements);
    });

    document.getElementById("close-tooltip").addEventListener("click", function() {
        document.getElementById("tooltip").style.display = "none";
    });

    document.addEventListener("click", function(event) {
        var tooltip = document.getElementById("tooltip");
        if (!tooltip.contains(event.target) && !event.target.classList.contains("clickable-box")) {
            tooltip.style.display = "none";
        }
    });

    document.getElementById("tooltip").addEventListener("click", function() {
        if (this.dataset.href) {
            window.open(this.dataset.href, "_blank");
        }
    });
</script>
